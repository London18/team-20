if (self.CavalryLogger) { CavalryLogger.start_js(["a5OKe"]); }

__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a={getBool:function(a,c){return b("VideoPlayerShakaGlobalConfig").getBool(g+a,c)},getNumber:function(a,c){return b("VideoPlayerShakaGlobalConfig").getNumber(g+a,c)},getString:function(a,c){return b("VideoPlayerShakaGlobalConfig").getString(g+a,c)}};e.exports=a}),null);
__d("oz-player/configs/OzGlobalConfig",[],(function(a,b,c,d,e,f){"use strict";var g=null;a={getBool:function(a,b){return g?g.getBool(a,b):b},getNumber:function(a,b){return g?g.getNumber(a,b):b},getString:function(a,b){return g?g.getString(a,b):b},setGlobalConfig:function(a){g=a}};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=a[e].bytes*8e3/a[e].timeInMs,g=Math.pow(b,a[e].timeInMs/1e3);c=f*(1-g)+c*g;d+=a[e].timeInMs/1e3}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=j(a,e*c);c=i(a,b);return c-e*d}e.exports={getBandwidthEstimate:a,getExponentiallyWeightedMovingAverageOfBandwidth:i,getStandardDeviationOfBandwidth:h,getMeanBandwidth:g,getBandwidthSamplesWithinRangeOfMean:j}}),null);
__d("oz-player/shims/OzEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=b("EventEmitter")}),null);
__d("oz-player/networks/OzTransformStream",["ReadableStream","WritableStream","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this);this.$OzTransformStream3=function(a){return a};a=a||{};a=a.errorTransform;(a===undefined||a===null)&&(a=this.$OzTransformStream3);var c=a||this.$OzTransformStream3;this.writable=new(b("WritableStream"))({start:function(a){this.$OzTransformStream2=a}.bind(this),write:function(a){this.emit("writableWrite",a),this.$OzTransformStream1.enqueue(a)}.bind(this),close:function(){this.emit("writableClose"),this.$OzTransformStream1.close()}.bind(this),abort:function(a){a=c(a);this.$OzTransformStream1.error(a)}.bind(this)});this.readable=new(b("ReadableStream"))({start:function(a){this.$OzTransformStream1=a}.bind(this),cancel:function(a){this.emit("readableCancel",a),this.$OzTransformStream2.error(a)}.bind(this)})}e.exports=a}),null);
__d("oz-player/utils/OzResourceTimingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){if(!performance.getEntriesByName)return null;a=performance.getEntriesByName(a,"resource");return a.reduce(function(a,b){if(a==null)return b;return typeof b.responseEnd==="number"&&typeof b.responseStart==="number"&&typeof b.startTime==="number"&&typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.requestStart==="number"&&typeof a.startTime==="number"?b.responseEnd<a.responseEnd?a:b:null},null)};e.exports={getLatestResourceTimingEntry:a}}),null);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/utils/OzResourceTimingUtils","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry;function a(a){__p&&__p();this.$8=Date.now();this.$9=0;this.$10=0;this.$11=function(){};this.$12=new(b("oz-player/networks/OzTransformStream"))();var c=a.stream,d=a.loggerProvider,e=a.byteCountPerSample,f=a.minimumBytesToSampleOnClose,g=a.minimumSampleDuration,h=a.maximumSampleBandwidth,i=a.usePerformanceEntryOnClose;a=a.ignoreTimeToResponseStart;this.$1=c;this.$13=d;this.$2=e;this.$3=f;this.$4=g;this.$5=h;this.$6=i;this.$7=a;this.$12.addListener("writableWrite",this.$14.bind(this));this.$12.addListener("writableClose",this.$15.bind(this))}a.prototype.getTransformStream=function(){return this.$12};a.prototype.onBandwidthSample=function(a){this.$11=a};a.prototype.$16=function(a,b){if(this.$13){var c=Date.now();this.$13&&this.$13.getOperationLogger("bandwidth_sampled").setLength(a).setClientTimeEnd(c).setClientTimeBegin(c-b).log()}this.$11(a,b)};a.prototype.$14=function(a){a.length!=undefined&&(this.$10+=a.length),this.$17()};a.prototype.$15=function(){__p&&__p();var a=Date.now()-this.$8;if(this.$3>0&&a>0&&this.$9===0&&this.$10>=this.$3){var b=this.$1.getLastRequestUrl();if(b!=null&&this.$6){b=g(b);if(b&&b.responseEnd&&b.startTime){b=this.$7?b.responseEnd-b.responseStart:b.responseEnd-b.startTime;a=b>0?b:a}}this.$18(a)||this.$16(this.$10,a)}};a.prototype.$18=function(a){var b=this.$10*8/(a/1e3);return a<this.$4&&b>this.$5};a.prototype.$17=function(){var a=Date.now(),b=a-this.$8;this.$10*8/(b/1e3);this.$2>0&&this.$10>=this.$9+this.$2&&!this.$18(b)&&(this.$16(this.$10-this.$9,b),this.$8=a,this.$9=this.$10)};e.exports=a}),null);
__d("oz-player/shims/OzRoundRobinPriorityTaskQueue",["RoundRobinPriorityTaskQueue"],(function(a,b,c,d,e,f){"use strict";e.exports=b("RoundRobinPriorityTaskQueue")}),null);
__d("oz-player/shims/OzSequentialTaskScheduler",["SequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("SequentialTaskScheduler")}),null);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/shims/OzRoundRobinPriorityTaskQueue","oz-player/shims/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=new Map(),i=2,j=2,k=6e4;function a(a){var c=g.get(a);if(!c){c=new(b("oz-player/shims/OzRoundRobinPriorityTaskQueue"))(i,j);var d=new(b("oz-player/shims/OzSequentialTaskScheduler"))(c,{taskTimeout:k});d.start();g.set(a,c);h.set(a,d)}return c}e.exports={getQueue:a,OZ_QUEUE_MAX_PRIORITY:i}}),null);
__d("oz-player/shims/OzBandwidthCache",["CacheStorage","Run"],(function(a,b,c,d,e,f){function a(a){"use strict";this.$1=new(b("CacheStorage"))("localstorage","_video_"),b("Run").onUnload(function(){this.$1.set("bandwidthEstimate",a())}.bind(this))}a.prototype.getCachedBandwidth=function(){"use strict";return this.$1.get("bandwidthEstimate")};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthEstimator",["oz-player/configs/OzGlobalConfig","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/shims/OzBandwidthCache","oz-player/shims/OzEventEmitter","oz-player/networks/OzBandwidthUtils","oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/networks/OzBandwidthUtils").getBandwidthEstimate,i=b("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverageOfBandwidth,j=b("oz-player/networks/OzBandwidthUtils").getStandardDeviationOfBandwidth,k=.9,l=5e5,m=2e4;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$OzBandwidthEstimator1=[],this.$OzBandwidthEstimator2=new(b("oz-player/shims/OzBandwidthCache"))(function(){return this.getAdjustedBandwidth(b("oz-player/configs/OzGlobalConfig"))}.bind(this))}a.prototype.getBandwidth=function(a){var b=h(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator3(a)};a.prototype.$OzBandwidthEstimator3=function(a){var b=l;if(a.getBool("use_cached_bandwidth",!1)){a=this.$OzBandwidthEstimator2.getCachedBandwidth();typeof a==="number"&&a>0&&(b=a)}return b};a.prototype.getStandardDeviationOfBandwidth=function(){return j(this.$OzBandwidthEstimator1)};a.prototype.getSampleCount=function(){return this.$OzBandwidthEstimator1.length};a.prototype.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator1.length===0)return this.$OzBandwidthEstimator3(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator4(a):this.$OzBandwidthEstimator5(a);return this.$OzBandwidthEstimator6(a,b)};a.prototype.$OzBandwidthEstimator6=function(a,c){var d=Math.max(0,b("oz-player/networks/OzStreamingTaskQueueProvider").getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);d=Math.min(k,d*a);return c*(1-d)};a.prototype.$OzBandwidthEstimator4=function(a){var b=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6)),c=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_variance_penalty_half_life",0));a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};a.prototype.$OzBandwidthEstimator5=function(a){return this.getBandwidth(a)};a.prototype.pipeThroughReporter=function(a,c,d){return{startStream:function(e){var f=new(b("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:c,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",m),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1)});f.onBandwidthSample(this.$OzBandwidthEstimator7.bind(this));return c.startStream(e).then(function(b){return c.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?b:b.pipeThrough(f.getTransformStream())})}.bind(this)}};a.prototype.$OzBandwidthEstimator7=function(a,c){this.$OzBandwidthEstimator1.push({bytes:a,timeInMs:c}),this.$OzBandwidthEstimator1.length>b("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator1.splice(0,1),this.emit("bandwidth_sampled")};e.exports=new a()}),null);
__d("ClientDecisionPrefetchCache",["VideoDashPrefetchCache","VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){this.$1=a;var d=c,e=b("VideoPlayerOzWWWGlobalConfig").getNumber("prefetch_cache_bandwidth_upper_limit",0);e>0&&(d.video=this.$2(c.video,e));b("VideoDashPrefetchCache").loadVideoGivenAllRepresentations(a,d,b("oz-player/networks/OzBandwidthEstimator").getBandwidth(b("VideoPlayerOzWWWGlobalConfig")))}a.prototype.hasCacheValue=function(a){return b("VideoDashPrefetchCache").hasCacheValue(a)};a.prototype.getCacheValue=function(a){return b("VideoDashPrefetchCache").getCacheValue(a)};a.prototype.getCachedRepresentations=function(a){return b("VideoDashPrefetchCache").getCachedRepresentations(this.$1)};a.prototype.$2=function(a,b){var c=a.filter(function(a){return a.bandwidth<=b});if(c.length>0)return c;c=a.find(function(a){return a.representation_id.endsWith("d")});return c?[c]:[a[0]]};e.exports=a}),null);